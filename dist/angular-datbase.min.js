var database;database=angular.module("ngDatabase",Array),database.factory("$database",Array(function(){var Database;return new(Database=function(){function Database(){}return Database.prototype.sql={},Database.prototype.req=null,Database.prototype.order_command=["INSERT","UPDATE","SELECT","FROM","WHERE","AND WHERE","OR WHERE"],Database.prototype.createTable=function(){},Database.prototype.select=function(param){return"undefined"==typeof param&&(param=["*"]),this.sql.SELECT=param,this},Database.prototype.insert=function(table,cols,values){return this.sql.INSERT={TABLE:table,PARAMS:{COLS:cols,VALUES:values}},this},Database.prototype.update=function(table,params){var array,field,param,value,_i,_len;for(array=[],_i=0,_len=params.length;_len>_i;_i++){param=params[_i];for(field in param)value=param[field],array.push(field+" = '"+value+"'")}return this.sql.UPDATE={TABLE:table,PARAMS:array},this},Database.prototype.where=function(field,value,operator){return"undefined"==typeof operator&&(operator="="),this.sql.WHERE=field+" "+operator+" '"+value+"'",this},Database.prototype.andWhere=function(field,value,operator){return"undefined"==typeof operator&&(operator="="),"undefined"==typeof this.sql["AND WHERE"]&&(this.sql["AND WHERE"]=[]),this.sql["AND WHERE"].push(field+" "+operator+" '"+value+"'"),this},Database.prototype.orWhere=function(field,value,operator){return"undefined"==typeof operator&&(operator="="),"undefined"==typeof this.sql["OR WHERE"]&&(this.sql["OR WHERE"]=[]),this.sql["OR WHERE"].push(field+" "+operator+" '"+value+"'"),this},Database.prototype.from=function(param){return this.sql.FROM=param,this},Database.prototype.exec=function(){var order,_i,_len,_ref;for(this.req="",_ref=this.order_command,_i=0,_len=_ref.length;_len>_i;_i++)switch(order=_ref[_i]){case"SELECT":this._select();break;case"FROM":this._from();break;case"WHERE":this._where();break;case"INSERT":this._insert();break;case"UPDATE":this._update()}this.req+=";"},Database.prototype._select=function(){"undefined"!=typeof this.sql.SELECT&&(this.req="",this.req="SELECT "+this.sql.SELECT.join(", "))},Database.prototype._from=function(){"undefined"!=typeof this.sql.FROM&&(this.req+=" FROM `"+this.sql.FROM+"`")},Database.prototype._where=function(){"undefined"!=typeof this.sql.WHERE&&(this.req+=" WHERE "+this.sql.WHERE)},Database.prototype._insert=function(){var fields,i,insert,val,values,_i,_len,_ref;if("undefined"!=typeof this.sql.INSERT){for(insert=this.sql.INSERT,fields=insert.PARAMS.COLS.join(", "),_ref=insert.PARAMS.VALUES,i=_i=0,_len=_ref.length;_len>_i;i=++_i)val=_ref[i],insert.PARAMS.VALUES[i]="'"+val+"'";values=insert.PARAMS.VALUES.join(", "),this.req+="INSERT INTO `"+insert.TABLE+"` ("+fields+") VALUES ("+values+")"}},Database.prototype._update=function(){var params,update;"undefined"!=typeof this.sql.UPDATE&&(update=this.sql.UPDATE,params=update.PARAMS.join(", "),this.req+="UPDATE `"+update.TABLE+"` SET "+params)},Database}())}));
